"use strict";function insertAtCaret(e,t){var a=document.getElementById(e),n=a.scrollTop,i=0,o=a.selectionStart||"0"==a.selectionStart?"ff":document.selection?"ie":!1;if("ie"==o){a.focus();var r=document.selection.createRange();r.moveStart("character",-a.value.length),i=r.text.length}else"ff"==o&&(i=a.selectionStart);var c=a.value.substring(0,i),l=a.value.substring(i,a.value.length);if(a.value=c+t+l,i+=t.length,"ie"==o){a.focus();var r=document.selection.createRange();r.moveStart("character",-a.value.length),r.moveStart("character",i),r.moveEnd("character",0),r.select()}else"ff"==o&&(a.selectionStart=i,a.selectionEnd=i,a.focus());a.scrollTop=n}function inject_email_template(e,t){$.each(t,function(t,a){t=t.replace("email_template_",""),a&&e.indexOf(t)>-1&&$("#"+t).val(a)})}$(document).ready(function(){$(".dropdown-toggle").click(function(e){var t=$(this).next(".dropdown-menu"),a=e.pageX+20,n=e.pageY+20,i=t.width(),o=t.height(),r=$(window).width()-(a+i),c=$(window).height()-(n+o);20>c&&t.css({top:"auto",bottom:"100%"})}),$("html").click(function(){$(".dropdown-menu:visible").not(".datepicker").removeAttr("style")});var e;$(".text-tag").bind("click",function(){var t=this.getAttribute("data-tag");return insertAtCaret(e.id,t),!1}),$(".taggable").on("focus",function(){e=this}),$(window).resize()}),$(window).resize(function(){var e=document,t=Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight));$(".sidebar").height(t);var a=$(this).outerHeight(),n=a-$("nav.navbar").outerHeight();n=n-$(".main-area .headerbar").outerHeight()-$(".nav-tabs").outerHeight(),$("#form-settings")&&(n-=50),$(".main-area").outerWidth()<800?$(".main-area .container-fluid, .main-area .tab-content, .main-area .content, .main-area .table-content").css("margin-top",34,"height",n):$(".main-area .container-fluid, .main-area .tab-content, .main-area .content, .main-area .table-content").height(n)});