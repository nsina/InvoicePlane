function insertAtCaret(e,t){var a=document.getElementById(e),n=a.scrollTop,i=0,r=a.selectionStart||"0"==a.selectionStart?"ff":document.selection?"ie":!1;if("ie"==r){a.focus();var o=document.selection.createRange();o.moveStart("character",-a.value.length),i=o.text.length}else"ff"==r&&(i=a.selectionStart);var c=a.value.substring(0,i),l=a.value.substring(i,a.value.length);if(a.value=c+t+l,i+=t.length,"ie"==r){a.focus();var o=document.selection.createRange();o.moveStart("character",-a.value.length),o.moveStart("character",i),o.moveEnd("character",0),o.select()}else"ff"==r&&(a.selectionStart=i,a.selectionEnd=i,a.focus());a.scrollTop=n}$(document).ready(function(){$(".dropdown-toggle").click(function(e){var t=$(this).next(".dropdown-menu"),a=e.pageX+20,n=e.pageY+20,i=t.width(),r=t.height(),o=$(window).width()-(a+i),c=$(window).height()-(n+r);20>c&&t.css({top:"auto",bottom:"100%"})}),$("html").click(function(){$(".dropdown-menu").removeAttr("style")}),$(".text-tag").bind("click",function(){var e=this.getAttribute("data-tag");return insertAtCaret("email_template_body",e),!1}),$(window).resize()}),$(window).resize(function(){var e=$(this).outerHeight()-$("nav.navbar").outerHeight();e=e-$(".main-area .headerbar").outerHeight()-$(".nav-tabs").outerHeight(),$("#form-settings")&&(e-=50),$(".main-area").outerWidth()<800?$(".main-area .container-fluid, .main-area .tab-content, .main-area .content, .main-area .table-content").css("margin-top",34,"height",e):$(".main-area .container-fluid, .main-area .tab-content, .main-area .content, .main-area .table-content").height(e)});